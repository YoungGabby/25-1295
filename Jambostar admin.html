<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jambostar Buses | Secure Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .seat { width: 35px; height: 35px; cursor: pointer; transition: 0.2s; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; }
        .seat-available { background-color: #e2e8f0; border: 2px solid #cbd5e1; color: #64748b; }
        .seat-available:hover { background-color: #fcd34d; border-color: #fbbf24; color: #78350f; }
        .seat-selected { background-color: #3b82f6 !important; border-color: #2563eb !important; color: white !important; }
        .seat-occupied { background-color: #cbd5e1 !important; color: #94a3b8 !important; cursor: not-allowed; }
        .aisle { width: 30px; }
        .hidden { display: none; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div id="login-overlay" class="fixed inset-0 bg-blue-900 bg-opacity-95 z-50 flex items-center justify-center">
        <div class="bg-white p-8 rounded-3xl shadow-2xl w-full max-w-md text-center">
            <h1 class="text-3xl font-black text-blue-900 tracking-tighter mb-2">JAMBOSTAR</h1>
            <p class="text-gray-500 mb-6 font-medium">Please enter Admin Credentials</p>
            <input id="admin-pass" type="password" placeholder="Enter Admin Password" class="w-full border-2 border-gray-200 p-4 rounded-xl mb-4 outline-none focus:border-yellow-400">
            <button onclick="checkLogin()" class="w-full bg-blue-900 text-white font-bold py-4 rounded-xl hover:bg-black transition-all">LOGIN TO ADMIN</button>
            <button onclick="closeLogin()" class="mt-4 text-sm text-gray-400 font-bold hover:text-blue-900">Cancel & Return to Booking</button>
        </div>
    </div>

    <nav class="bg-blue-900 text-white p-4 shadow-md sticky top-0 z-40">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-black tracking-tighter text-yellow-400">JAMBOSTAR</h1>
            <div class="flex gap-6 items-center">
                <button onclick="showPage('student-page')" class="text-xs uppercase tracking-widest font-bold hover:text-yellow-400">Booking</button>
                <button onclick="openLoginModal()" class="bg-yellow-400 text-blue-900 px-4 py-2 rounded-lg text-xs font-black uppercase tracking-widest hover:bg-white transition-all">Admin</button>
            </div>
        </div>
    </nav>

    <main id="student-page" class="container mx-auto py-8 px-4 grid lg:grid-cols-2 gap-10">
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
            <h2 class="text-lg font-bold mb-4 flex items-center gap-2">
                <span class="w-3 h-3 bg-yellow-400 rounded-full"></span> 3 x 2 Seating Arrangement
            </h2>
            <div class="flex flex-col items-center gap-2" id="bus-layout"></div>
            <div class="mt-6 flex justify-center gap-4 text-[10px] font-bold uppercase text-gray-400 border-t pt-4">
                <div class="flex items-center gap-1"><div class="w-3 h-3 bg-gray-200 rounded"></div> Available</div>
                <div class="flex items-center gap-1"><div class="w-3 h-3 bg-blue-500 rounded"></div> Selected</div>
                <div class="flex items-center gap-1"><div class="w-3 h-3 bg-gray-400 rounded"></div> Booked</div>
            </div>
        </div>

        <div class="space-y-6">
            <div class="bg-blue-900 text-white p-8 rounded-2xl shadow-xl">
                <h3 class="text-xl font-bold mb-6">Reservation Form</h3>
                <form class="space-y-4" onsubmit="confirmBooking(event)">
                    <div>
                        <label class="block text-[10px] uppercase font-bold text-blue-300 mb-1">Select Route</label>
                        <select id="routeSelect" class="w-full bg-blue-800 border border-blue-700 p-4 rounded-xl text-white outline-none">
                            <option value="150">Athi ➔ Shalom (Ksh 150)</option>
                            <option value="150">Athi ➔ Syokimau (Ksh 150)</option>
                            <option value="200">Athi ➔ Nairobi (Ksh 200)</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-800 p-4 rounded-xl border border-blue-700 text-center">
                            <span class="block text-[10px] uppercase font-bold text-blue-300">Selected Seats</span>
                            <span id="seatCount" class="text-xl font-black text-yellow-400">0</span>
                        </div>
                        <div class="bg-yellow-400 p-4 rounded-xl text-center">
                            <span class="block text-[10px] uppercase font-bold text-blue-900">Total Due</span>
                            <span id="totalPriceDisplay" class="text-xl font-black text-blue-900">Ksh 0</span>
                        </div>
                    </div>

                    <input type="text" id="studentName" required class="w-full bg-blue-800 border border-blue-700 p-4 rounded-xl text-white" placeholder="Full Name">
                    <button type="submit" class="w-full bg-yellow-400 hover:bg-white text-blue-900 font-black py-4 rounded-xl transition-all shadow-xl text-lg">CONFIRM BOOKING</button>
                </form>
            </div>
        </div>
    </main>

    <main id="admin-page" class="container mx-auto py-8 px-4 hidden">
        <div class="bg-white p-8 rounded-2xl shadow-lg">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-black text-blue-900">System Dashboard</h2>
                <button onclick="showPage('student-page')" class="text-red-500 font-bold text-xs uppercase">Logout</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="p-6 bg-blue-50 border-b-4 border-blue-500 rounded-xl">
                    <p class="text-gray-500 text-xs font-bold uppercase">Total Tickets</p>
                    <p class="text-3xl font-black text-blue-900">1,240</p>
                </div>
                <div class="p-6 bg-green-50 border-b-4 border-green-500 rounded-xl">
                    <p class="text-gray-500 text-xs font-bold uppercase">Today's Revenue</p>
                    <p class="text-3xl font-black text-green-700">Ksh 42,500</p>
                </div>
                <div class="p-6 bg-yellow-50 border-b-4 border-yellow-500 rounded-xl">
                    <p class="text-gray-500 text-xs font-bold uppercase">Load Factor</p>
                    <p class="text-3xl font-black text-yellow-700">88%</p>
                </div>
            </div>

            <table class="w-full text-left">
                <thead class="border-b-2 border-gray-100">
                    <tr class="text-gray-400 text-[10px] uppercase font-black">
                        <th class="py-4">Student Name</th>
                        <th class="py-4">Route</th>
                        <th class="py-4">Seats</th>
                        <th class="py-4">Amount</th>
                        <th class="py-4">Status</th>
                    </tr>
                </thead>
                <tbody class="text-sm font-medium">
                    <tr class="border-b border-gray-50">
                        <td class="py-4">Kamau Otieno</td>
                        <td class="py-4">Athi to Shalom</td>
                        <td class="py-4">3A, 3B, 3C</td>
                        <td class="py-4 font-bold">Ksh 450</td>
                        <td class="py-4 text-green-500 font-bold italic">Confirmed</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script>
        let selectedSeats = [];
        const MAX_SEATS = 5;
        const ADMIN_PASS = "jambostar2026"; // Change this to your desired password

        function renderSeats() {
            const container = document.getElementById('bus-layout');
            container.innerHTML = ''; 
            for (let r = 1; r <= 9; r++) {
                let rowDiv = document.createElement('div');
                rowDiv.className = "flex gap-2 items-center mb-1";
                ['A', 'B', 'C'].forEach(l => rowDiv.appendChild(createSeat(r + l)));
                let aisle = document.createElement('div'); aisle.className = "aisle"; rowDiv.appendChild(aisle);
                ['D', 'E'].forEach(l => rowDiv.appendChild(createSeat(r + l)));
                container.appendChild(rowDiv);
            }
        }

        function createSeat(id) {
            let s = document.createElement('div');
            s.className = "seat seat-available";
            s.innerText = id;
            s.onclick = () => toggleSeat(s, id);
            return s;
        }

        function toggleSeat(el, id) {
            if (selectedSeats.includes(id)) {
                selectedSeats = selectedSeats.filter(s => s !== id);
                el.classList.remove('seat-selected');
            } else if (selectedSeats.length < MAX_SEATS) {
                selectedSeats.push(id);
                el.classList.add('seat-selected');
            } else {
                alert("Maximum 5 seats allowed per booking!");
            }
            updateSummary();
        }

        function updateSummary() {
            document.getElementById('seatCount').innerText = selectedSeats.length;
            const pricePerSeat = parseInt(document.getElementById('routeSelect').value);
            document.getElementById('totalPriceDisplay').innerText = Ksh ${selectedSeats.length * pricePerSeat};
        }

        // Login Logic
        function openLoginModal() {
            document.getElementById('login-overlay').classList.remove('hidden');
        }

        function closeLogin() {
            document.getElementById('login-overlay').classList.add('hidden');
        }

        function checkLogin() {
            const pass = document.getElementById('admin-pass').value;
            if (pass === ADMIN_PASS) {
                showPage('admin-page');
                closeLogin();
                document.getElementById('admin-pass').value = '';
            } else {
                alert("Incorrect Password!");
            }
        }

        function showPage(pageId) {
            document.getElementById('student-page').classList.add('hidden');
            document.getElementById('admin-page').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
            if(pageId === 'student-page') document.getElementById('login-overlay').classList.add('hidden');
        }

        function confirmBooking(e) {
            e.preventDefault();
            if(selectedSeats.length === 0) return alert("Please select at least one seat.");
            const name = document.getElementById('studentName').value;
            alert(SUCCESS!\n\nName: ${name}\nSeats: ${selectedSeats.join(', ')}\nTotal: ${document.getElementById('totalPriceDisplay').innerText}\n\nPlease pay at the bus.);
            location.reload(); 
        }

        document.getElementById('routeSelect').onchange = updateSummary;
        renderSeats();
        // Hide overlay on start
        closeLogin();
    </script>
</body>
</html>
